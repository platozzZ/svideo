(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"18df":function(e,o,n){"use strict";(function(e){n("3e13");t(n("66fd"));var o=t(n("e297"));function t(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,n("543d")["createPage"])},"57c4":function(e,o,n){"use strict";var t=n("9805"),u=n.n(t);u.a},6005:function(e,o,n){"use strict";var t;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u={data:function(){var e=this;return{errorType:["toast"],codeTips:"",model:{type:2,phone:"",vcode:""},modelPwd:{type:1,phone:"",password:"",wx_openid:""},rules:{phone:[{required:!0,message:"请输入手机号",trigger:["blur"]},{validator:function(o,n,t){return e.$u.test.mobile(n)},message:"手机号码不正确",trigger:["blur"]}],vcode:[{required:!0,message:"请输入验证码",trigger:["blur"]},{type:"number",message:"验证码只能为数字",trigger:["blur"]}]},rulesPwd:{phone:[{required:!0,message:"请输入手机号",trigger:["blur"]},{validator:function(o,n,t){return e.$u.test.mobile(n)},message:"手机号码不正确",trigger:["blur"]}],password:[{required:!0,message:"请输入密码",trigger:["blur"]}]},loadText:{nomore:"其他登录方式"},customStyle:{backgroundColor:"rgba(0,0,0,0)"},showVeriFication:!0,toogleLogin:!0}},onLoad:function(){t=this,t.modelPwd.wx_openid=t.openid,console.log(t)},onReady:function(){this.$refs.uForm.setRules(this.rules),this.$refs.uFormPwd.setRules(this.rulesPwd)},methods:{submit:function(){t.toogleLogin?t.$refs.uForm.validate((function(e){console.log(e),e?console.log("验证通过"):console.log("验证失败")})):t.$refs.uFormPwd.validate((function(e){console.log(e),e?(t.loginPwd(t.modelPwd),console.log("验证通过")):console.log("验证失败")}))},loginPwd:function(e){t.$u.post("/api/user/login",e).then((function(e){console.log("loginPwd",e),t.$u.vuex("token",e.token),t.$u.vuex("userInfo",e),t.showToast()})).catch((function(e){console.log("catch",e)}))},showToast:function(){t.$refs.uToast.show({title:"登录成功",type:"success",back:!0})},getPhoneNumber:function(e){console.log(e)},toIntegral:function(){t.$u.route("/pages/integral/integral")},toLogin:function(){t.$u.route("/pages/login/login")},toogle:function(){t.toogleLogin=!t.toogleLogin},end:function(){t.showVeriFication=!0,t.$u.toast("倒计时结束")},start:function(){t.showVeriFication=!1,t.$u.toast("倒计时开始")},codeChange:function(e){t.codeTips=e},getCode:function(){if(console.log(t.model.phone.length),t.$u.test.mobile(t.model.phone))if(t.$refs.uCode.start(),t.$refs.uCode.canGetCode){var e={phone:t.model.phone};console.log(e),t.$u.post("/api/user/captcha",e).then((function(e){console.log("getCode",e),t.$u.toast("验证码已发送"),t.$refs.uCode.start()})).catch((function(e){console.log("catch",e)}))}else t.$u.toast("倒计时结束后再发送");else t.$u.toast("请输入正确手机号")}}};o.default=u},9805:function(e,o,n){},bf45:function(e,o,n){"use strict";n.r(o);var t=n("6005"),u=n.n(t);for(var i in t)"default"!==i&&function(e){n.d(o,e,(function(){return t[e]}))}(i);o["default"]=u.a},e0cf:function(e,o,n){"use strict";n.d(o,"b",(function(){return u})),n.d(o,"c",(function(){return i})),n.d(o,"a",(function(){return t}));var t={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"bfec"))},uAvatar:function(){return n.e("uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"d2f9"))},uForm:function(){return n.e("uview-ui/components/u-form/u-form").then(n.bind(null,"6c89"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"23ff"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"6ef9"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"5233"))},uVerificationCode:function(){return n.e("uview-ui/components/u-verification-code/u-verification-code").then(n.bind(null,"09a6"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"4b26"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"f0b1"))},uToast:function(){return n.e("uview-ui/components/u-toast/u-toast").then(n.bind(null,"0563"))}},u=function(){var e=this,o=e.$createElement;e._self._c},i=[]},e297:function(e,o,n){"use strict";n.r(o);var t=n("e0cf"),u=n("bf45");for(var i in u)"default"!==i&&function(e){n.d(o,e,(function(){return u[e]}))}(i);n("57c4");var r,c=n("f0c5"),l=Object(c["a"])(u["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],r);o["default"]=l.exports}},[["18df","common/runtime","common/vendor"]]]);