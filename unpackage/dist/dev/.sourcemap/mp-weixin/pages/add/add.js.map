{"version":3,"sources":["uni-app:///main.js","webpack:///D:/plato/svideo/pages/add/add.vue?867f","webpack:///D:/plato/svideo/pages/add/add.vue?7df7","webpack:///D:/plato/svideo/pages/add/add.vue?09fe","webpack:///D:/plato/svideo/pages/add/add.vue?1abd","uni-app:///pages/add/add.vue","webpack:///D:/plato/svideo/pages/add/add.vue?cf9d"],"names":["createPage","Page","renderjs","component","options","__file","components","uNavbar","uIcon","uForm","uFormItem","uUpload","uInput","uPicker","uSelect","uToast","uModal","render","_vm","this","_h","$createElement","_self","_c","_isMounted","e0","$event","selectShow","e1","pickerShow","recyclableRender","staticRenderFns","_withStripped","that"],"mappings":";;;;wEAAA,qBACA,sBACA,qC,mDACAA,EAAWC,a;;;;2DCHX,gQACIC,EADJ,wJASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,oBACZ,aAAAF,E;;;;2GCvBf,yhC;;;;2GCAA,8LAAIG,EAAa,CACfC,QAAS,WACP,OAAO,8KAITC,MAAO,WACL,OAAO,kKAITC,MAAO,WACL,OAAO,kKAITC,UAAW,WACT,OAAO,oOAITC,QAAS,WACP,OAAO,kNAITC,OAAQ,WACN,OAAO,4MAITC,QAAS,WACP,OAAO,kNAITC,QAAS,WACP,OAAO,8KAITC,OAAQ,WACN,OAAO,wKAITC,OAAQ,WACN,OAAO,yKAKPC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,GACdL,EAAIM,aACPN,EAAIO,GAAK,SAASC,GAChBR,EAAIS,YAAa,GAGnBT,EAAIU,GAAK,SAASF,GAChBR,EAAIW,YAAa,KAInBC,GAAmB,EACnBC,EAAkB,GACtBd,EAAOe,eAAgB,G;;;;2DCpEvB,sqBAAgnB,eAAG,G;;;;wECmFnnB,IAAIC,E,wEACJ,CACA,KADA,WAEA,OACA,OACA,aACA,WACA,SACA,UACA,SACA,eACA,kBACA,uBACA,qBACA,gBACA,oBACA,sBACA,cAEA,YACA,iBAEA,cACA,OACA,OACA,CACA,YACA,iBACA,4BAIA,OACA,CACA,YACA,kBACA,iBAGA,cACA,CACA,YACA,kBACA,mBAGA,kBACA,CACA,YACA,kBACA,mBAGA,oBACA,CACA,YACA,kBACA,mBAGA,QACA,CACA,YACA,oBACA,iBAGA,WACA,CACA,YACA,kBACA,oBAIA,UACA,sBACA,cACA,cACA,QACA,QACA,SACA,OACA,QACA,UACA,WAEA,uBACA,YACA,oBAEA,aACA,0BAKA,OAhGA,WAiGA,OACA,YACA,iBACA,mCACA,iDACA,sBAEA,QAxGA,WAyGA,uCAEA,SACA,SADA,SACA,GACA,eACA,QACA,8BACA,eACA,oBACA,eACA,qBACA,2BACA,iCAKA,OAfA,WAgBA,oCACA,GACA,eACA,qBAEA,wBAIA,IAzBA,SAyBA,GACA,eAEA,oBACA,uDACA,WACA,iBACA,aACA,oBAGA,GAFA,4BAEA,mBACA,yBACA,eACA,kBACA,sCAGA,yCAIA,+BAKA,gCACA,eACA,eACA,eACA,iBAGA,oBAIA,YA/DA,WAgEA,2BACA,eAEA,aAnEA,WAoEA,4BACA,eACA,oBACA,eACA,8BACA,6BAEA,KANA,SAMA,GACA,mBAIA,QAhFA,WAiFA,iDACA,eACA,iDACA,yBACA,kBACA,mBACA,mCAGA,WA1FA,WA2FA,iBAEA,YA7FA,SA6FA,GACA,eACA,qFAEA,UAjGA,WAkGA,gBAEA,aApGA,SAoGA,GACA,uBACA,eACA,mBACA,OAGA,cA3GA,SA2GA,GACA,qBACA,eACA,kBACA,wBACA,qBACA,6DACA,KACA,6BACA,KACA,iCAEA,uCAQA,UA/HA,SA+HA,OACA,gCACA,iCACA,kCAEA,SApIA,SAoIA,SACA,yBACA,kBACA,mCAEA,yCAQA,SAjJA,SAiJA,OACA,wBAMA,aAxJA,SAwJA,KAIA,GAHA,8BACA,qCACA,mCACA,YAGA,OAFA,4BACA,qBAGA,qBACA,WACA,2BACA,4CAEA,yCAGA,KAzKA,SAyKA,GAGA,OAFA,eAEA,2BACA,mBACA,2BACA,aACA,WACA,oBACA,UACA,qBAEA,sEACA,eAIA,OA1LA,SA0LA,GACA,kCACA,mCACA,WACA,kBACA,oBACA,iCAEA,2CAIA,UAtMA,WAuMA,qBAEA,UAzMA,SAyMA,OAEA,qBACA,QACA,OACA,a;;;;2DC7YA,kqCAAqnC,eAAG,G","file":"pages/add/add.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/add/add.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add.vue?vue&type=template&id=f869476c&\"\nvar renderjs\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/add/add.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=template&id=f869476c&\"","var components = {\n  uNavbar: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n    )\n  },\n  uIcon: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n    )\n  },\n  uForm: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-form/u-form\" */ \"@/uview-ui/components/u-form/u-form.vue\"\n    )\n  },\n  uFormItem: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-form-item/u-form-item\" */ \"@/uview-ui/components/u-form-item/u-form-item.vue\"\n    )\n  },\n  uUpload: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-upload/u-upload\" */ \"@/uview-ui/components/u-upload/u-upload.vue\"\n    )\n  },\n  uInput: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-input/u-input\" */ \"@/uview-ui/components/u-input/u-input.vue\"\n    )\n  },\n  uPicker: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-picker/u-picker\" */ \"@/uview-ui/components/u-picker/u-picker.vue\"\n    )\n  },\n  uSelect: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-select/u-select\" */ \"@/uview-ui/components/u-select/u-select.vue\"\n    )\n  },\n  uToast: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n    )\n  },\n  uModal: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-modal/u-modal\" */ \"@/uview-ui/components/u-modal/u-modal.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.selectShow = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.pickerShow = true\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<u-navbar title=\"发布视频\"></u-navbar>\r\n\t\t<view class=\"padding-tb-sm padding-lr\">\r\n\t\t\t<view class=\"video-container flex align-center justify-center\" @click=\"addVideo\" v-if=\"!model.video\">\r\n\t\t\t\t<u-icon name=\"plus\" size=\"120\" color=\"#c0c4cc\"></u-icon>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"u-rela\" v-else>\r\n\t\t\t\t<video :src=\"model.video\" class=\"video\"></video>\r\n\t\t\t\t<cover-view class=\"delete u-abso\"  @tap.stop=\"deleteVideo\">\r\n\t\t\t\t\t<u-icon name=\"close\" size=\"20\" color=\"#ffffff\"></u-icon>\r\n\t\t\t\t</cover-view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tips u-tips-color flex align-center justify-end u-p-t-10 u-font-10\">*视频大小不能超过100M</view>\r\n\t\t</view>\r\n\t\t<view class=\"u-p-l-30 u-p-r-30 u-p-b-50\">\r\n\t\t\t<u-form :model=\"model\" :rules=\"rules\" ref=\"uForm\" :label-style=\"labelStyle\" :border-bottom=\"false\" :label-position=\"'right'\" :errorType=\"errorType\">\r\n\t\t\t\t<u-form-item :border-bottom=\"false\" label-width=\"120\" label=\"视频封面\" prop=\"cover_image\">\r\n\t\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t\t<!-- @on-success=\"onSuccess\"\r\n\t\t\t\t\t\t@on-list-change=\"onListChange\" -->\r\n\t\t\t\t\t\t<u-upload name=\"cover_image\" width=\"160\" height=\"160\" max-count=\"1\" :custom-btn=\"true\" upload-text=\" \" :show-progress=\"false\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\taction=\"https://jjsp.autovlog.com.cn/api/videofill/upload_img\"\r\n\t\t\t\t\t\t\t@on-remove=\"onRemove\" \r\n\t\t\t\t\t\t\t@on-change=\"onChange\" \r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<view slot=\"addBtn\" class=\"slot-btn\" hover-class=\"slot-btn__hover\" hover-stay-time=\"150\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"plus\" size=\"60\" color=\"#c0c4cc\"></u-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</u-upload>\r\n\t\t\t\t\t\t<view class=\"u-p-l-10 u-tips-color u-font-12\" style=\"line-height: 1.5;\">上传视频封面，如果不上传，系统将自动截取</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t<u-form-item :border-bottom=\"false\" label-width=\"120\" label=\"视频标题\" prop=\"title\">\r\n\t\t\t\t\t<u-input :border=\"border\" :border-color=\"borderColor\" placeholder=\"输入视频的标题，最多30个字\" maxlength=\"30\" v-model=\"model.title\" type=\"text\"></u-input>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t<u-form-item :border-bottom=\"false\" label-width=\"120\" label=\"车辆类型\" prop=\"name\">\r\n\t\t\t\t\t<u-input :border=\"border\" :border-color=\"borderColor\" type=\"select\" :select-open=\"selectShow\" v-model=\"model.goodsType\" placeholder=\"请选择车辆类型\" @click=\"selectShow = true\"></u-input>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t<u-form-item :border-bottom=\"false\" label-width=\"120\" label=\"4S店标题\" prop=\"ftitle\">\r\n\t\t\t\t\t<u-input :border=\"border\" :border-color=\"borderColor\" placeholder=\"输入4S店的标题，最多30个字\" maxlength=\"30\" v-model=\"model.ftitle\" type=\"text\"></u-input>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t<u-form-item :border-bottom=\"false\" label-width=\"150\" label=\"发布时间\" prop=\"nsendtime\">\r\n\t\t\t\t\t<u-input :border=\"border\" :border-color=\"borderColor\" type=\"select\" :select-open=\"pickerShow\" v-model=\"model.nsendtime\" placeholder=\"请选择时间\" @click=\"pickerShow = true\"></u-input>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t</u-form>\r\n\t\t\t<view class=\"form-tips\">\r\n\t\t\t\t<view class=\"u-main-color\">\r\n\t\t\t\t\t店铺剩余积分：<text class=\"form-tips-color\">1000</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"u-tips-color u-m-t-10\">\r\n\t\t\t\t\t发布视频奖励100积分。如店铺当日剩余积分不足或已清零。您可以选择修改发布时间，来保障您的收益。\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- <u-select mode=\"single-column\" :list=\"selectList\" v-model=\"selectShow\" @confirm=\"selectConfirm\"></u-select> -->\r\n\t\t\t<u-picker v-model=\"pickerShow\" mode=\"time\" :params=\"params\" @confirm=\"timeConfirm\"></u-picker>\r\n\t\t\t<u-select :safe-area-inset-bottom=\"true\" value-name=\"id\" label-name=\"name\" child-name=\"sub_type\" v-model=\"selectShow\" mode=\"mutil-column-auto\" :list=\"selectList\" @confirm=\"selectConfirm\"></u-select>\r\n\t\t</view>\r\n\t\t<view class=\"footer\">\r\n\t\t\t<view class=\"footer-seat\"></view>\r\n\t\t\t<view class=\"footer-content flex align-center\">\r\n\t\t\t\t<view class=\"footer-btn bg-disabled felx-sub\" v-if=\"!model.video\" @click=\"videoTips\">\r\n\t\t\t\t\t发布\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"footer-btn bg-pyellow felx-sub\" @click=\"submit\" v-else>\r\n\t\t\t\t\t发布\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<u-toast ref=\"uToast\" />\r\n\t\t<u-modal ref=\"uModal\" \r\n\t\tv-model=\"modalShow\" \r\n\t\t:show-cancel-button=\"true\"\r\n\t\t\t:show-title=\"false\" \r\n\t\t\t:async-close=\"true\"\r\n\t\t\t@confirm=\"modalConfirm\" \r\n\t\t\t:content=\"modalContent\"\r\n\t\t/>\r\n\t</view>\n</template>\n\n<script>\r\nvar that\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmodel: {\r\n\t\t\t\tgoodsType: '',\r\n\t\t\t\tuser_id: '',// 用户id\r\n\t\t\t\ttitle: '',// 视频标题\r\n\t\t\t\tftitle: '',// 4S店标题\r\n\t\t\t\tvideo: '',// 视频文件\r\n\t\t\t\tcover_image: '',\r\n\t\t\t\tdistributor_id: '',// 所属4s店id\r\n\t\t\t\tlongitude: '105.156525',// 经度\r\n\t\t\t\tlatitude: '38.668237',// 纬度\r\n\t\t\t\tnclassify_id: '',// 一级标签id\r\n\t\t\t\tnclassify_two_id: '',// 二级标签id\r\n\t\t\t\tnclassify_three_id: '',// 三级标签id\r\n\t\t\t\tnsendtime: '',// 发布时间\r\n\t\t\t},\r\n\t\t\tlabelStyle: {\r\n\t\t\t\tcolor: '#4C4C4C'\r\n\t\t\t},\r\n\t\t\tselectList: [],\r\n\t\t\trules: {\r\n\t\t\t\tvideo: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '视频不能为空',\r\n\t\t\t\t\t\ttrigger: ['blur', 'change'],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t],\r\n\t\t\t\ttitle: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入视频标题',\r\n\t\t\t\t\t\ttrigger: 'blur' ,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tnclassify_id: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择车辆类型',\r\n\t\t\t\t\t\ttrigger: 'change',\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tnclassify_two_id: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择车辆类型',\r\n\t\t\t\t\t\ttrigger: 'change',\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tnclassify_three_id: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择车辆类型',\r\n\t\t\t\t\t\ttrigger: 'change',\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tftitle: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入4S店的标题',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tnsendtime: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择发布时间',\r\n\t\t\t\t\t\ttrigger: 'change',\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tborder: true,\r\n\t\t\tborderColor: '#F6F6F6',\r\n\t\t\tpickerShow: false,\r\n\t\t\tselectShow: false,\r\n\t\t\tparams: {\r\n\t\t\t\tyear: true,\r\n\t\t\t\tmonth: true,\r\n\t\t\t\tday: true,\r\n\t\t\t\thour: true,\r\n\t\t\t\tminute: true,\r\n\t\t\t\tsecond: true\r\n\t\t\t},\r\n\t\t\tselectResult: '请选择车辆类型',\r\n\t\t\tcodeTips: '',\r\n\t\t\terrorType: ['toast'],\r\n\t\t\t\r\n\t\t\tmodalShow: false,\r\n\t\t\tmodalContent: '确认删除视频吗？',\r\n\t\t\t// percent: 0,\r\n\t\t\t// progressType: 'success'\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\t\tthat = this\r\n\t\tthat.getType()\r\n\t\tthat.getLocations()\r\n\t\tthat.model.user_id = that.userInfo.user_id\r\n\t\tthat.model.distributor_id = that.userInfo.distributor_id\r\n\t\tconsole.log(that.model)\r\n\t},\r\n\tonReady() {\r\n\t\tthis.$refs.uForm.setRules(this.rules);\r\n\t},\r\n\tmethods: {\r\n\t\taddVideo(e){\r\n\t\t\tuni.chooseVideo({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsourceType: ['album','camera'],\r\n\t\t\t\tmaxDuration: 15,\r\n\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tconsole.log(that.model);\r\n\t\t\t\t\tconsole.log(that.model.video);\r\n\t\t\t\t\tthat.model.video = res.tempFilePath;\r\n\t\t\t\t\t// self.src = res.tempFilePath;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsubmit() {\r\n\t\t\tthat.$refs.uForm.validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthat.add(that.model)\r\n\t\t\t\t\tconsole.log('验证通过');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('验证失败');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tadd(data){ // \r\n\t\t\tconsole.log(data)\r\n\t\t\t  // that.$refs.uUpload.upload();\r\n\t\t\tlet uploadTask = uni.uploadFile({\r\n\t\t\t\turl: \"https://jjsp.autovlog.com.cn/api/videofill/store\",\r\n\t\t\t\tformData: data,\r\n\t\t\t\tfilePath: data.video,\r\n\t\t\t\tname: \"video\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log('uploadTask',res);\r\n\t\t\t\t\t// if (JSON.parse(res.data).code == 201) {}\r\n\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\tlet art = JSON.parse(res.data)\r\n\t\t\t\t\t\tconsole.log(art)\r\n\t\t\t\t\t\tif (art.statusCode == 200) {\r\n\t\t\t\t\t\t\tthat.showToast(\"发布成功，等待审核\",'success',true) \r\n\t\t\t\t\t\t\t// that.progressType = 'success'\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.showToast(art.message,'warning',true)\r\n\t\t\t\t\t\t\t// that.progressType = 'warning'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.showToast('文件过大','error')\r\n\t\t\t\t\t\t// that.progressType = 'error'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t  });\r\n\t\t\t  uploadTask.onProgressUpdate(res => {\r\n\t\t\t\t  console.log(res)\r\n\t\t\t\t  if(res.progress < 100){\r\n\t\t\t\t\t  uni.showLoading({\n\t\t\t\t\t\ttitle: '上传中...'\n\t\t\t\t\t})\r\n\t\t\t\t  } else {\r\n\t\t\t\t\t  uni.hideLoading()\r\n\t\t\t\t  }\r\n\t\t\t  });\r\n\t\t},\r\n\t\tdeleteVideo(){\r\n\t\t\tconsole.log('deleteVideo')\r\n\t\t\tthat.showModal()\r\n\t\t},\r\n\t\tgetLocations(){\r\n\t\t\tconsole.log('getLocations');\r\n\t\t\tuni.getLocation({\r\n\t\t\t    success: function (res) {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthat.model.longitude = res.longitude\r\n\t\t\t\t\tthat.model.latitude = res.latitude\r\n\t\t\t    },\r\n\t\t\t\tfail(err){\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetType(){ // /api/video/type\r\n\t\t\tlet data = {distributor_id: that.userInfo.distributor_id}\r\n\t\t\tconsole.log(data)\r\n\t\t\tthat.$u.post('/api/video/type',data).then(res => {\r\n\t\t\t\tconsole.log('getType',res);\r\n\t\t\t\tthat.selectList = res\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.log('getType-catch', err);\r\n\t\t\t});\r\n\t\t},\r\n\t\tshowSelect() {\r\n\t\t\tthat.selectShow = true;\r\n\t\t},\r\n\t\ttimeConfirm(e){\r\n\t\t\tconsole.log(e);\r\n\t\t\tthat.model.nsendtime = e.year + '-' + e.month + '-' + e.day + ' ' + e.hour + ':' + e.minute + ':' + e.second;\r\n\t\t},\r\n\t\tshowModal(){\r\n\t\t\tthat.modalShow = true;\r\n\t\t},\r\n\t\tmodalConfirm(e){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthat.modalShow = false;\r\n\t\t\t\tthat.model.video = ''\r\n\t\t\t}, 1500)\r\n\t\t},\r\n\t\t// 选择商品类型回调\r\n\t\tselectConfirm(e) {\r\n\t\t\tthat.model.goodsType = ''\r\n\t\t\tconsole.log(e)\r\n\t\t\tconsole.log(e[0])\r\n\t\t\tconsole.log(e[0].value)\r\n\t\t\te.map((val, index) => {\r\n\t\t\t\tthat.model.goodsType += that.model.goodsType == '' ? val.label : '-' + val.label;\r\n\t\t\t\tif(index == 0){\r\n\t\t\t\t\tthat.model.nclassify_id = val.value;\r\n\t\t\t\t} else if(index == 1){\r\n\t\t\t\t\tthat.model.nclassify_two_id = val.value\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.model.nclassify_three_id = val.value\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// that.model.nclassify_id = e[0].value;\r\n\t\t\t// that.model.nclassify_two_id = e[1].value;\r\n\t\t\t// that.model.nclassify_three_id = e[3].value;\r\n\t\t},\r\n\t\t\r\n\t\tonSuccess(data, index, lists) {\r\n\t\t\tconsole.log('onSuccess-data', data);\r\n\t\t\tconsole.log('onSuccess-index', index);\r\n\t\t\tconsole.log('onSuccess-lists', lists);\r\n\t\t},\r\n\t\tonChange(res, index, lists, name){\r\n\t\t\tlet art = JSON.parse(res.data);\r\n\t\t\tif(art.statusCode == 200){\r\n\t\t\t\tthat.model.cover_image = art.data.img_url\r\n\t\t\t} else {\r\n\t\t\t\tthat.showToast(res.response.message,'error')\r\n\t\t\t}\r\n\t\t\t// console.log('onChange-art', art);\r\n\t\t\t// console.log('onChange-res', res);\r\n\t\t\t// console.log('onChange-index', index);\r\n\t\t\t// console.log('onChange-lists', lists);\r\n\t\t\t// console.log('onChange-name', name);\r\n\t\t},\r\n\t\tonRemove(index, lists, name){\r\n\t\t\tthat.model.cover_image = ''\r\n\t\t\t// console.log(lists.length);\r\n\t\t\t// console.log('onRemove-index', index);\r\n\t\t\t// console.log('onRemove-lists', lists);\r\n\t\t\t// console.log('onRemove-name', name);\r\n\t\t},\r\n\t\tonListChange(lists,name) {\r\n\t\t\tconsole.log('onListChange', lists);\r\n\t\t\tconsole.log('onListChange', lists.length);\r\n\t\t\tconsole.log('onListChange-name', name);\r\n\t\t\tif(lists.length == 0){\r\n\t\t\t\tthat.model.cover_image = ''\r\n\t\t\t\tconsole.log(that.model);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\tconsole.log(that.model);\r\n\t\t\tlet res = lists[0]\r\n\t\t\tif(res.response.statusCode == 200){\r\n\t\t\t\tthat.model.cover_image = res.response.data.img_url\r\n\t\t\t} else {\r\n\t\t\t\tthat.showToast(res.response.message,'error')\r\n\t\t\t}\r\n\t\t},\r\n\t\tbtop(base64) {\r\n\t\t\tconsole.log(base64);\r\n\t\t\t// this.base64 = base64;\r\n\t\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\t\tvar arr = base64.split(','),\r\n\t\t\t\t\tmime = arr[0].match(/:(.*?);/)[1],\r\n\t\t\t\t\tbstr = atob(arr[1]),\r\n\t\t\t\t\tn = bstr.length,\r\n\t\t\t\t\tu8arr = new Uint8Array(n);\r\n\t\t\t\twhile (n--) {\r\n\t\t\t\t\tu8arr[n] = bstr.charCodeAt(n);\r\n\t\t\t\t}\r\n\t\t\t\treturn resolve((window.URL || window.webkitURL).createObjectURL(new Blob([u8arr], {\r\n\t\t\t\t\ttype: mime\r\n\t\t\t\t})));\r\n\t\t\t});\r\n\t\t},\r\n\t\tbase64(path){\r\n\t\t    return new Promise((resolve, reject) => {\r\n\t\t        uni.getFileSystemManager().readFile({\r\n\t\t\t\t\tfilePath: path, //选择图片返回的相对路径\r\n\t\t\t\t\tencoding: 'base64', //编码格式\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tresolve('data:image/;base64,' + res.data)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => reject(res.errMsg)\r\n\t\t        })\r\n\t\t    })\r\n\t\t},\r\n\t\tvideoTips(){\r\n\t\t\tthat.$u.toast('请上传视频')\r\n\t\t},\r\n\t\tshowToast(title,type,back) {\r\n\t\t\tif(back){\r\n\t\t\t\tthat.$refs.uToast.show({\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\ticon: false,\r\n\t\t\t\t\t// back: true\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthat.$refs.uToast.show({\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\ticon: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t}\r\n};\n</script>\n\n<style lang=\"scss\">\r\npage{\r\n\tbackground-color: #fff;\r\n}\r\n.delete{\r\n\ttop: -10rpx;\r\n\tright: -10rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tcolor: #fff;\r\n\tbackground-color: #fa3534;\r\n\tpadding: 10rpx;\r\n\tborder-radius: 50%;\r\n\tz-index: 99999;\r\n}\r\n.video-container{\r\n\twidth: 100%;\r\n\theight: 340rpx;\r\n\tbackground-color: #EDEDED;\r\n\tborder-radius: 8rpx;\r\n}\r\n.video{\r\n\twidth: 100%;\r\n\tborder-radius: 8rpx;\r\n}\r\n/deep/ .u-form-item{\r\n\tpadding: 0 0 20rpx;\r\n\tline-height: 1.8;\r\n\t.u-input{\r\n\t\tbackground-color: #F6F6F6;\r\n\t\tpadding: 0 30rpx;\r\n\t\tborder-radius: 4rpx;\r\n\t}\r\n\t\r\n\t.slot-btn {\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground: rgb(244, 245, 246);\r\n\t\tborder-radius: 10rpx;\r\n\t}\r\n\t\r\n\t.slot-btn__hover {\r\n\t\tbackground-color: rgb(235, 236, 238);\r\n\t}\r\n}\r\n.u-select-container{\r\n\tflex: 1;\r\n\tbackground-color: #F6F6F6;\r\n\tpadding: 0 20rpx;\r\n\tborder-radius: 4rpx;\r\n\theight: 70rpx;\r\n}\r\n.form-tips-color{\r\n\tcolor: #001C00;\r\n}\r\n.bg-disabled{\r\n\tbackground-color: $u-type-info-disabled;\r\n}\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}